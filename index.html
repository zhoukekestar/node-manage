<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>控制器</title>
    <script src="//cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
    <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <style>
      body{
        padding: 2em;
      }
      #restart {
        margin: 4em;
      }
      p {
        border-bottom: solid 1px #ccc;
      }
    </style>
</head>
<body>

  <div class="text-center">
    <button id="restart" class="btn btn-primary">重启node</button>
  </div>

  <div id="msg"></div>
  <script>

    $(function(){
      $('#restart').click(function(){
        $.getJSON('/restart', function(d){
          $('#msg').append('<p>' + d.msg + '</p>');
        });
      });

      // 创建一个Socket实例
      var socket = new WebSocket('ws://192.168.1.201:3001');

      // 打开Socket
      socket.onopen = function(event) {

        // 监听消息
        socket.onmessage = function(event) {
          //console.log('Client received a message',event);
          $('#msg').append('<p>' + event.data + '</p>');
        };
      };

    })
  </script>
</body>
</html>
